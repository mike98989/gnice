<main class="content-wrapper" ng-init="fetch_all_banners()">

  <div class="page-header">
    <h3 class="page-title">
      <span class="page-title-icon bg-gradient-primary text-white mr-2">
        <i class="mdi mdi-flag "></i>
      </span> Banners
    </h3>
  </div>


  <aside class="d-flex justify-content-end">
    <p class="result text-center" style="display: none"></p>
  </aside>
  <div class="loader text-center">
    <img src="{{dirlocation}}public/assets/images/spinner.gif" style="width: 30px" />
  </div>
  <section class="row">

    <article class="col-12 grid-margin">
      <div class="card">
        <div class="card-body">
          <h4 class="card-title">All Banners</h4>
          <div class="search-field d-none d-md-block my-3">
            <form class="d-flex align-items-center h-100" action="#">
              <div class="input-group">
                <div class="input-group-prepend bg-transparent">
                  <i class="input-group-text border-0 mdi mdi-account-search"></i>
                </div>
                <input type="text" class="form-control bg-transparent border-0"
                  placeholder="search for an admin account " ng-model="bannerSearch">
              </div>
            </form>
          </div>
          <div class="table-responsive">
            <table class="table table-striped">
              <thead>
                <tr>
                  <th>#</th>
                  <th>Title</th>
                  <th>Description</th>
                  <th>Type</th>
                  <th>State</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody>
                <tr dir-paginate="banner in all_banners | filter:bannerSearch | itemsPerPage: pageSize"
                  current-page="currentPage" ng-cloak>
                  <td>{{($index +1) + (currentPage-1) * pageSize}}</td>
                  <td>
                    <img src="{{dirlocation}}/public/assets/images/uploads/profile/{{banner.image}}" class="mr-2" />
                    <span>
                      {{banner.title}}
                    </span>
                    <span ng-switch="banner.status">
                      <span ng-switch-when="1">
                        <i class="mdi mdi-lock-open text-success"></i>
                      </span>
                      <span ng-switch-when="0">
                        <i class="mdi mdi mdi-lock text-warning"></i>
                      </span>
                      <span ng-switch-default>
                        none
                      </span>
                    </span>
                  </td>

                  <td>
                    {{ banner.description }}
                  </td>
                  <td>
                    <div ng-switch="banner.type">
                      <span ng-switch-when="1">
                        <span class="badge badge-info">TOP</span>
                      </span>
                      <span ng-switch-when="2">
                        <span class="badge badge-success">MAIN</span>
                      </span>
                      <span ng-switch-when="3">
                        <span class="badge badge-danger">SIDE</span>
                      </span>
                      <span ng-switch-default>
                        none
                      </span>
                    </div>
                  </td>
                  <td>
                    <span ng-switch="banner.status">
                      <span ng-switch-when="1">
                        <i class="mdi mdi-lock-open text-success"></i>
                      </span>
                      <span ng-switch-when="0">
                        <i class="mdi mdi mdi-lock text-warning"></i>
                      </span>
                      <span ng-switch-default>
                        none
                      </span>
                    </span>

                  </td>
                  <td>
                    <!-- toggle enable account buttons -->
                    <span ng-switch="banner.status" class="mr-1 form_inverse_{{ banner.id }}" data-toggle="modal"
                      data-target=".disable-modal" ng-click="append_modal_info(admin)">
                      <span ng-switch-when="1">
                        <button class="badge badge-warning">
                          <i class="mdi mdi-account-convert mr-1"></i> Deactivate
                        </button>
                      </span>
                      <span ng-switch-when="0">
                        <button class="badge badge-success">
                          <i class="mdi mdi-account-convert mr-1"></i> Activate
                        </button>
                      </span>
                      <span ng-switch-default>
                        none
                      </span>
                    </span>


                    <!-- delete user account control -->
                    <button class="badge badge-danger form_inverse_{{ admin.id }}" data-toggle="modal"
                      data-target=".delete-user-modal" ng-click="append_modal_info(admin)">
                      <i class="mdi mdi-delete-forever mr-1"></i> Delete
                    </button>
                    <button class="badge badge-info form_inverse_{{ admin.id }}" ng-click="toggle_form( banner.id )">
                      <i class="mdi mdi-pencil-lock mr-1"></i> Edit
                    </button>
                  </td>
                </tr>
              </tbody>
              <!-- disable user modal -->
              <div class="modal fade disable-modal" id="exampleModalCenter" tabindex="-1" role="dialog"
                aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered" role="document">
                  <div class="modal-content">
                    <div class="card">

                      <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                          <span aria-hidden="true">&times;</span>
                        </button>
                      </div>
                      <div class="modal-body">
                        <p class=" text-center display-1 text-warning"><i class="mdi mdi-alert"></i></p>
                        <p class="display-4 text-center">
                          You are about to
                          <span ng-switch="info.status">
                            <span ng-switch-when="1">
                              <span> disable </span>
                            </span>
                            <span ng-switch-when="0">
                              <span> enable </span>
                            </span>
                            <span ng-switch-default>
                            </span>
                          </span>
                          <span class="text-info">
                            {{ info.fullname | uppercase}}
                          </span>
                        </p>
                      </div>
                      <div class="modal-footer">

                        <!-- call disable_enable() -->
                        <span ng-switch="info.status" class="mr-1">
                          <span ng-switch-when="1">
                            <button ng-click="enable_or_disable_admin(0,info, $index)" class="btn btn-warning btn-sm"
                              data-dismiss="modal">
                              Disable
                            </button>
                          </span>
                          <span ng-switch-when="0">
                            <button ng-click="enable_or_disable_admin(1,info,$index)" class="btn btn-success btn-sm"
                              data-dismiss="modal">
                              Enable
                            </button>
                          </span>
                          <span ng-switch-default>
                            none
                          </span>
                        </span>

                        <button type="button" class="btn btn-light btn-sm " data-dismiss="modal"><i
                            class="mdi mdi-cancel mr-1"></i>Cancel</button>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <!-- end disable admin modal -->

              <!-- delete admin modal -->
              <div class="modal fade delete-user-modal" id="exampleModalCenter" tabindex="-1" role="dialog"
                aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered" role="document">
                  <div class="modal-content">
                    <div class="card">

                      <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                          <span aria-hidden="true">&times;</span>
                        </button>
                      </div>
                      <div class="modal-body">
                        <p class=" text-center display-1 text-danger"><i class="mdi mdi-delete"></i></p>
                        <p class="display-4 text-center">
                          You are about to DETETE
                          <span class="text-danger">
                            {{ info.fullname | uppercase}}
                          </span>
                        </p>
                      </div>
                      <div class="modal-footer">

                        <!-- call delete function() -->
                        <button ng-click="delete_admin_account_and_ads(info.id)" class="btn btn-danger btn-sm"
                          data-dismiss="modal">
                          Delete admin
                        </button>
                        <button type="button" class="btn btn-light btn-sm " data-dismiss="modal">
                          <i class="mdi mdi-cancel mr-1"></i>Cancel</button>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <!-- end delete modal -->

            </table>
            <dir-pagination-controls boundary-links="true" template-url="" style="float: right">
            </dir-pagination-controls>
          </div>
        </div>
      </div>
    </article>

    <article class="col-sm-12 col-md-8 grid-margin">
      <div class="card">
        <div class="loader" style="text-align: center">
          <img src="{{dirlocation}}public/assets/images/spinner.gif" style="width: 30px" />
        </div>
        <div class="card-body">
          <h4 class="card-title p-2 mb-4">Create New Banner</h4>
          <form ng-submit="create_new_banner()" id="create_new_banner">

            <div class="form-group ">
              <label " for=" banner_type">Banner Type</label>
              <select class="form-control" name="banner_type" id="banner_type" required>
                <option value="">SELECT BANNER TYPE</option>
                <option value="1">Top Banner</option>
                <option value="2">Main Banner</option>
                <option value="3">Side Banner</option>
              </select>
            </div>
            <div class="form-group">
              <label for="title">Title:</label>
              <input type="text" class="form-control " placeholder="banner title" name="title" id="title" required>
            </div>
            <div class="form-group">
              <label for="sub_title">Sub title:</label>
              <input type="text" class="form-control " placeholder="banner sub title" name="sub_title" id="sub_title"
                required>
            </div>
            <div class="form-group">
              <label for="description">Description:</label>
              <textarea type="text" class="form-control " placeholder="banner description" name="description"
                id="description" required></textarea>

            </div>
            <div class="form-group mt-2">

              <label>Image</label>
              <input type="file" name="image" id="image" multiple class="form-control file-upload-info"
                placeholder="Upload Image" required>
            </div>

            <button type="submit" class="btn btn-info btn-sm"><i class="mdi mdi-book-plus mr-2"></i>Submit</button>
          </form>
        </div>
      </div>
    </article>
  </section>